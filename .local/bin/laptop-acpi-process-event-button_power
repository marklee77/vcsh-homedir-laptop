#!/bin/bash
# FIXME: could have some more sophisticated code to check aging out or other
# processes, similar to how we do locks for normal tasks...

scriptname="$(basename $0)"

logfile="${HOME}/.local/var/log/${scriptname}.log"
exec 1>>${logfile}
exec 2>&1

rundir="${HOME}/.local/var/run/${scriptname}"
mkdir -p ${rundir}
if [ -f ${rundir}/confirm ]; then
    rm ${rundir}/confirm
    laptop-hibernate
else
    touch ${rundir}/confirm
    sleep 10
    rm ${rundir}/confirm
fi

exit 0
